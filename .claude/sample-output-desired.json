{
  "schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "N8N Node Output with Original Row Numbers",
    "description": "Schema for n8n node output that includes the original row number for each data entry from a file.",
    "type": "array",
    "items": {
      "type": "object",
      "properties": {
        "files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "sheets": {
                "type": "object",
                "description": "Contains data for each sheet, with sheet names as keys.",
                "patternProperties": {
                  ".*": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "origRow": {
                          "type": "integer",
                          "description": "The original row number from the source file."
                        }
                      },
                      "required": ["origRow"],
                      "additionalProperties": true
                    }
                  }
                }
              },
              "metadata": {
                "type": "object",
                "properties": {
                  "fileName": { "type": "string" },
                  "fileSize": { "type": "integer" },
                  "fileType": { "type": "string" },
                  "processedAt": { "type": "string", "format": "date-time" }
                },
                "required": ["fileName", "fileSize", "fileType", "processedAt"]
              }
            },
            "required": ["sheets", "metadata"]
          }
        },
        "totalFiles": { "type": "integer" },
        "processedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["files", "totalFiles", "processedAt"]
    }
  },
  "sampleOutput": [
    {
      "files": [
        {
          "sheets": {
            "Document Control": [
              { "origRow": 3, "B": "Document Control " },
              { "origRow": 4, "B": "Document Title", "C": "Record of Processing Activities" },
              { "origRow": 5, "B": "Document Type ", "C": "Register" },
              { "origRow": 6, "B": "Version", "C": "V1.01" },
              { "origRow": 7, "B": "Document Reference", "C": "PDPPL-02050503E" },
              { "origRow": 8, "B": "Document Owner ", "C": "CDP" },
              { "origRow": 9, "B": "Document Classification", "C": "External" },
              { "origRow": 10, "B": "Document History " },
              { "origRow": 11, "B": "Version Number ", "C": "Description ", "D": "Date" },
              { "origRow": 12, "B": 1.01, "C": "Published V1.01 document", "D": "2020-11-01T00:00:00.000Z" },
              { "origRow": 13, "B": "Related Documents " },
              { "origRow": 14, "B": "Document Reference ", "C": "Document Title ", "D": "Document Title " },
              { "origRow": 15, "B": "PDPPL-02050212E", "C": "Record of Processing Activities Guidelines for Regulated Entities (English)", "D": "Record of Processing Activities Guidelines for Regulated Entities (English)" }
            ],
            "1. Cover Sheet Template": [
              { "origRow": 2, "A": "[Organisation name] Record of Processing Activities", "B": "[Organisation name] Record of Processing Activities" },
              { "origRow": 3, "A": "Controller Details", "B": "Controller Details" },
              { "origRow": 4, "A": "The legal name of the controller" },
              { "origRow": 5, "A": "The registered address of the controller" },
              { "origRow": 6, "A": "Email of the controller" },
              { "origRow": 7, "A": "Phone number of the controller" },
              { "origRow": 8, "A": "Data Privacy Ownership Details", "B": "Data Privacy Ownership Details" },
              { "origRow": 9, "A": "Name of person or team responsible for data privacy in the controller's organisation" },
              { "origRow": 10, "A": "Email for the person or team responsible for data privacy in the controller's organisation" },
              { "origRow": 11, "A": "Phone number of the person or team responsible for data privacy in the controller's organisation" }
            ],
            "2. RoPA Template": [
              { "origRow": 1, "A": "Process Overview", "B": "Process Overview", "C": "Process Overview", "D": "Process Overview", "E": "Process Overview", "F": "Categories of Personal Data ", "G": "Categories of a Special Nature ", "H": "Source of Personal Data ", "I": "Category of Individual ", "J": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "K": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "L": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "M": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "N": "Data Privacy Impact Assessment (DPIA)", "O": "Internal Parties Data is Shared With", "P": "Internal Parties Data is Shared With", "Q": "External Parties Personal Data is Shared With", "R": "External Parties Personal Data is Shared With", "S": "External Parties Personal Data is Shared With", "T": "External Parties Personal Data is Shared With", "U": "Security Measures ", "V": "Retention Period ", "W": "Storage Location ", "X": "Breach Records" },
              { "origRow": 2, "A": "#", "B": "Business Function / Department ", "C": " Name and Contact Details of the Process Owner", "D": "Name of Processing Activity", "E": "Purpose for Processing ", "F": "E.g. Name, DoB, Address, Email ID, Contact Number, Bank Account Details, Passport/Visa/Work Permits, Credit Card Information etc.  ", "G": "Personal Data Relating to: \nEthnic origin, Children, Health, physical or psychological condition, Religious Creeds, Marital Relations, Criminal Offences and / or Biometrics.", "H": "E.g. Direct From the Individual, From a Third Party, From a Public Register etc. ", "I": "E.g. Employees, Customers, Others (specify)", "J": "Permitted Reasons for Processing Activity", "K": "Additional condition for processing personal data of a special nature (if applicable)", "L": "Case or Purpose for Exemption", "M": "Additional Information \ne.g. Details of Legitimate Interests or Consent", "N": "DPIA Reference \n(Where Possible, Provide a Link or Reference Number to the DPIA or Documented Decision that DPIA is Not Necessary)", "O": "Business Function / Department Personal Data is Shared With", "P": "Geographical Location(s) of Internal Parties", "Q": "Names or Categories of the Third Parties Personal Data is Shared With", "R": "Contract Reference \n(Where Possible, Include the Contract Reference Number(s)", "S": "Does This Process Involve Any Cross-Border Data Flows? (Yes/No)", "T": "Safeguards for Restricted Transfers of Personal Data to Locations Outside Qatar (incl. Qatar Free Zones) (if applicable)", "U": "General Description of Administrative, Financial and Technical Precautions", "V": "Retention Period (Length of Time Personal Data is Kept For)", "W": "Where the Personal Data is Stored", "X": "Documentation Recording Any Breaches Impacting This Process" }
            ],
            "3. Notes": [
              { "origRow": 4, "C": "Notes" },
              { "origRow": 5, "C": "Use this template to document the processing activities you undertake as a controller." },
              { "origRow": 6, "C": "Headings highlighted in blue relate to information about the purpose of the processing and ownership." },
              { "origRow": 7, "C": "Headings highlighted in the dark and light red colour relate to information about the process itself." },
              { "origRow": 8, "C": "Instructions" },
              { "origRow": 9, "C": "1.    On the template cover sheet complete the controllers details (name, address, email, and phone number) in cells C4-C7." },
              { "origRow": 10, "C": "2.   On the template cover sheet complete the Data Privacy Ownership Details (name, email, and phone number of the person responsible for data privacy at your organisation) in cells C9 - C 11." },
              { "origRow": 11, "C": "3.   Document your organisation’s processing activities, starting in cell C5 (in the RoPA tab), and working from left to right. Where necessary use multiple rows for each processing activity in order to be as granular as possible (see Template example and RoPA example tab)." },
              { "origRow": 12, "C": "Guidance" },
              { "origRow": 13, "C": "For detailed guidance on Registers of Processing Activities (RoPAs), please see the RoPA Guidelines published by the CDP." }
            ],
            "4. Cover Sheet Example ": [
              { "origRow": 1, "A": "[Organisation name] Register of Processing Activities", "B": "[Organisation name] Register of Processing Activities" },
              { "origRow": 2, "A": "Controller Details", "B": "Controller Details" },
              { "origRow": 3, "A": "The legal name of the controller", "B": "Example Controller : Name of Entity" },
              { "origRow": 4, "A": "The registered address of the controller", "B": "Example Controller, PO Box 00000, Example Street, Doha, State of Qatar" },
              { "origRow": 5, "A": "Email for the controller", "B": "contactus@controllerwebdomain.qr" },
              { "origRow": 6, "A": "Phone number of the controller", "B": "+974 0000 0000" },
              { "origRow": 7, "A": "Data Privacy Ownership Details", "B": "Data Privacy Ownership Details" },
              { "origRow": 8, "A": "Name of person or team responsible for data privacy", "B": "Firstname Surname" },
              { "origRow": 9, "A": "Email for the person or team responsible for data privacy", "B": "firstname.surname@controllerwebdomain.qr" },
              { "origRow": 10, "A": "Phone number of the person or team responsible for data privacy", "B": "+974 0000 0000" }
            ],
            "5. RoPA Example ": [
              { "origRow": 1, "A": "Process Overview", "B": "Process Overview", "C": "Process Overview", "D": "Process Overview", "E": "Process Overview", "F": "Categories of Personal Data ", "G": "Categories of a Special Nature ", "H": "Source of Personal Data ", "I": "Category of Individual ", "J": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "K": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "L": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "M": "Permitted Reason for Processing (including exemptions under Art 18 and 19)", "N": "Data Privacy Impact Assessment (DPIA)", "O": "Internal Parties Data is Shared With", "P": "Internal Parties Data is Shared With", "Q": "External Parties Personal Data is Shared With", "R": "External Parties Personal Data is Shared With", "S": "External Parties Personal Data is Shared With", "T": "External Parties Personal Data is Shared With", "U": "Security Measures ", "V": "Retention Period ", "W": "Storage Location ", "X": "Breach Records" },
              { "origRow": 2, "A": "#", "B": "Business Function / Department ", "C": " Name and Contact Details of the Process Owner", "D": "Name of Processing Activity", "E": "Purpose for Processing ", "F": "E.g. Name, DoB, Address, Email ID, Contact Number, Bank Account Details, Passport/Visa/Work Permits, Credit Card Information etc.  ", "G": "Personal Data Relating to: \nEthnic origin, Children, Health, physical or psychological condition, Religious Creeds, Marital Relations, Criminal Offences and / or Biometrics.", "H": "E.g. Direct From the Individual, From a Third Party, From a Public Register etc. ", "I": "E.g. Employees, Customers, Others (specify)", "J": "Permitted Reasons for Processing Activity", "K": "Additional condition for processing personal data of a special nature (if applicable)", "L": "Case or Purpose for Exemption", "M": "Additional Information \ne.g. Details of Legitimate Interests or Consent", "N": "DPIA Reference \n(Where Possible, Provide a Link or Reference Number to the DPIA or Documented Decision that DPIA is Not Necessary)", "O": "Business Function / Department Personal Data is Shared With", "P": "Geographical Location(s) of Internal Parties", "Q": "Names or Categories of the Third Parties Personal Data is Shared With", "R": "Contract Reference \n(Where Possible, Include the Contract Reference Number(s)", "S": "Does This Process Involve Any Cross-Border Data Flows? (Yes/No)", "T": "Safeguards for Restricted Transfers of Personal Data to Locations Outside Qatar (incl. Qatar Free Zones) (if applicable)", "U": "General Description of Administrative, Financial and Technical Precautions", "V": "Retention Period (Length of Time Personal Data is Kept For)", "W": "Where the Personal Data is Stored", "X": "Documentation Recording Any Breaches Impacting This Process" },
              { "origRow": 3, "A": 1, "B": "Human Resources", "C": "[Name, Tel. Number and Email ]", "D": "Recruitment ", "E": "To hire and recruit new employees ", "F": "Name, DoB, Email ID, Tel. Number, Passport details", "G": "Martial Relations; whether the individual has any physical disabilities", "H": "Recruitment agencies", "I": "Employment Candidates", "J": "Legitimate interest ", "K": "Employment", "L": "N/A", "M": "N/A", "N": "DPIA#00xx", "O": "HR/Recruitment", "P": "Qatar ", "Q": "Recruitment agency [Name]", "R": "Contract#00xx", "S": "No", "T": "N/A", "U": "Contractual obligations, vendor audits, internal data storage and retention, strict access control", "V": "2 years", "W": "Shared drives and emails", "X": "N/A" },
              { "origRow": 4, "A": 2, "B": "Finance and Business Operations", "C": "[Name, Tel. Number and Email ]", "D": "Invoice payment", "E": "To pay of vendor invoices", "F": "Vendor representative name and contact details ", "G": "N/A", "H": "Vendor Invoice", "I": "Vendor representative", "J": "Contractual obligation", "K": "N/A", "L": "N/A", "M": "N/A", "N": "DPIA#00xx", "O": "Finance/ Accounts Payable", "P": "Qatar ", "Q": "Vendor (source of data)", "R": "Relevant vendor contract(s)", "S": "No", "T": "N/A", "U": "Document archiving and storage, access control, ERP controls", "V": "2 years", "W": "Shared Drives, Emails, Hard Copies in Cabinet, ERP System", "X": "N/A" },
              { "origRow": 5, "A": 3, "B": "Facility Management\n", "C": "[Name, Tel. Number and Email ]", "D": "First aid training", "E": "To train staff in first aid practices", "F": "Name", "G": "N/A", "H": "Individual ", "I": "Employees ", "J": "Legitimate interest ", "K": "N/A", "L": "N/A", "M": "N/A", "N": "Not Necessary ", "O": "None", "P": "Qatar ", "Q": "N/A", "R": "N/A", "S": "N/A", "T": "N/A", "U": "Personal data is not retained.", "V": "N/A", "W": "N/A", "X": "N/A" },
              { "origRow": 6, "A": 4, "B": "Sales", "C": "[Name, Tel. Number and Email ]", "D": "Email marketing", "E": "To carry out direct marketing", "F": "Email ID, name, purchase history", "G": "N/A", "H": "Individual ", "I": "Customer", "J": "Explicit consent", "K": "N/A", "L": "N/A", "M": "Consent collected on website with opt-in [insert link to consent form]", "N": "DPIA#00xx", "O": "Marketing", "P": "Qatar ", "Q": "N/A", "R": "N/A", "S": "N/A", "T": "N/A", "U": "Access control to the customer database, regular audits of the database", "V": "2 years", "W": "Server", "X": "N/A" }
            ]
          },
          "metadata": {
            "fileName": "Record%20of%20Processing%20Activities%20-%20Template%20for%20Regulated%20Entities%20%28English%29%20V1.01.xlsx",
            "fileSize": 308455,
            "fileType": "xlsx",
            "processedAt": "2025-07-27T11:53:15.174Z"
          }
        }
      ],
      "totalFiles": 1,
      "processedAt": "2025-07-27T11:53:15.179Z"
    }
  ]
}
